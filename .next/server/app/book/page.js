(()=>{var e={};e.id=886,e.ids=[886],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var t=a(482),l=a(9108),r=a(2563),n=a.n(r),i=a(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(s,d);let o=["",{children:["book",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5483)),"C:\\Users\\Owner\\Desktop\\splash\\src\\app\\book\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1673)),"C:\\Users\\Owner\\Desktop\\splash\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Owner\\Desktop\\splash\\src\\app\\book\\page.tsx"],m="/book/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/book/page",pathname:"/book",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4384:(e,s,a)=>{Promise.resolve().then(a.bind(a,7200))},7200:(e,s,a)=>{"use strict";a.r(s),a.d(s,{BookingStepper:()=>r});var t=a(2295),l=a(3729);function r({initialStep:e=1,completedSteps:s=[]}){let[a,r]=(0,l.useState)(e),[n,i]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[c,m]=(0,l.useState)(null),[x,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[b,j]=(0,l.useState)(null),[g,f]=(0,l.useState)(null),[v,N]=(0,l.useState)(null),[y,w]=(0,l.useState)([]),[k,S]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=0;v&&(e+=v.price),y.forEach(s=>{e+=s.price}),S(e)},[v,y]),(0,l.useEffect)(()=>{b&&v&&T(b)},[v]);let[C,P]=(0,l.useState)([]),[F,$]=(0,l.useState)(!1),[M,E]=(0,l.useState)({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",eventType:"",surface:"",notes:""}),T=async e=>{if(e)try{$(!0),i(null);let s=v?.durationMin||120,a=await fetch("/api/availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,durationMin:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to fetch availability")}let t=(await a.json()).slots.filter(e=>e.available).map(e=>e.time);P(t),g&&!t.includes(g)&&f(null),0===t.length?i(`No available time slots for this date with a ${s}-minute party. Please try a different date or consider a shorter duration.`):(o(`${t.length} time slots available for ${e}`),i(null))}catch(e){console.error("Error fetching availability:",e),i(e instanceof Error?e.message:"Unable to load availability. Please try again."),P([])}finally{$(!1)}},q=e=>{j(e),f(null),i(null),o(null),e?T(e):P([])},_=async e=>{if(!p){i("Please accept the waiver");return}i(null),console.log(`Processing ${e} payment`)};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("div",{"data-testid":"progress-indicator",className:"mb-8",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",a," of 5"]}),t.jsx("div",{className:"flex space-x-2 mt-2",children:[1,2,3,4,5].map(e=>t.jsx("button",{"data-testid":`step-${e}-button`,className:`w-8 h-8 rounded-full ${e===a?"bg-blue-500 text-white":s.includes(e)?"bg-green-500 text-white":"bg-gray-200"}`,disabled:!s.includes(e)&&e!==a,onClick:()=>{(s.includes(e)||e===a)&&r(e)},children:e},e))})]}),1===a&&(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Select Date & Time"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Choose your event date"}),n&&t.jsx("div",{className:"mb-4 text-red-600",role:"alert",children:n}),d&&t.jsx("div",{className:"mb-4 text-green-600",role:"alert",children:d}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"date",className:"block text-sm font-medium mb-2",children:"Date"}),t.jsx("input",{id:"date",type:"date",value:b||"",onChange:e=>q(e.target.value),min:new Date().toISOString().split("T")[0],className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"time",className:"block text-sm font-medium mb-2",children:"Time"}),b?F?(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),t.jsx("span",{className:"text-sm",children:"Loading available times..."})]}):0===C.length?(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"No available times for this date"}),t.jsx("p",{className:"text-gray-400 text-xs",children:"Try selecting a different date"})]}):(0,t.jsxs)("select",{id:"time",value:g||"",onChange:e=>f(e.target.value),className:"border p-2 rounded w-full",children:[t.jsx("option",{value:"",children:"Select a time"}),C.map(e=>t.jsx("option",{value:e,children:e},e))]}):t.jsx("p",{className:"text-gray-500 text-sm",children:"Please select a date first"})]})]}),t.jsx("p",{children:"Please select a date"}),t.jsx("p",{children:"Please select a time"})]}),2===a&&(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Select Package"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Choose your foam party package"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{"data-testid":"package-starter",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${v?.name==="Starter Party"?"border-blue-500 bg-blue-50":""}`,onClick:()=>{N({name:"Starter Party",price:399,durationMin:60}),i(null),o(null),b&&T(b)},children:[t.jsx("h3",{className:"font-bold",children:"Starter Party"}),t.jsx("p",{className:"text-gray-600",children:"60 minutes • Up to 15 guests"}),t.jsx("p",{className:"text-2xl font-bold",children:"$299"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 mt-2",children:[t.jsx("li",{children:"• Professional foam machine"}),t.jsx("li",{children:"• Biodegradable foam solution"}),t.jsx("li",{children:"• Setup and breakdown"})]})]}),(0,t.jsxs)("div",{"data-testid":"package-mega",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${v?.name==="Mega Splash"?"border-blue-500 bg-blue-50":""}`,onClick:()=>{N({name:"Mega Splash",price:449,durationMin:90}),i(null),o(null),b&&T(b)},children:[t.jsx("h3",{className:"font-bold",children:"Mega Splash"}),t.jsx("p",{className:"text-gray-600",children:"90 minutes • Up to 25 guests"}),t.jsx("p",{className:"text-2xl font-bold",children:"$449"})]}),(0,t.jsxs)("div",{"data-testid":"package-glow",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${v?.name==="Glow Night Spectacular"?"border-blue-500 bg-blue-50":""}`,onClick:()=>{N({name:"Glow Night Spectacular",price:599,durationMin:90}),i(null),o(null),b&&T(b)},children:[t.jsx("h3",{className:"font-bold",children:"Glow Night Spectacular"}),t.jsx("p",{className:"text-gray-600",children:"90 minutes • Up to 30 guests"}),t.jsx("p",{className:"text-2xl font-bold",children:"$599"})]})]})]}),3===a&&(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add-ons"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{"data-testid":"addon-extra-time",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${y.some(e=>"Extra 30 Minutes"===e.name)?"border-green-500 bg-green-50":""}`,onClick:()=>{let e={name:"Extra 30 Minutes",price:99};y.some(s=>s.name===e.name)?w(y.filter(s=>s.name!==e.name)):w([...y,e])},children:[t.jsx("h3",{className:"font-bold",children:"Extra 30 Minutes"}),t.jsx("p",{className:"text-2xl font-bold",children:"$99"})]}),(0,t.jsxs)("div",{"data-testid":"addon-neon-foam",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${y.some(e=>"Neon Foam Upgrade"===e.name)?"border-green-500 bg-green-50":""}`,onClick:()=>{let e={name:"Neon Foam Upgrade",price:75};y.some(s=>s.name===e.name)?w(y.filter(s=>s.name!==e.name)):w([...y,e])},children:[t.jsx("h3",{className:"font-bold",children:"Neon Foam Upgrade"}),t.jsx("p",{className:"text-2xl font-bold",children:"$75"})]}),(0,t.jsxs)("div",{"data-testid":"addon-slip-n-slide",className:`border p-4 rounded cursor-pointer hover:bg-gray-50 ${y.some(e=>"Slip-n-Slide Combo"===e.name)?"border-green-500 bg-green-50":""}`,"data-available":"true",onClick:()=>{let e={name:"Slip-n-Slide Combo",price:150};y.some(s=>s.name===e.name)?w(y.filter(s=>s.name!==e.name)):w([...y,e])},children:[t.jsx("h3",{className:"font-bold",children:"Slip-n-Slide Combo"}),t.jsx("p",{className:"text-2xl font-bold",children:"$150"})]})]})]}),4===a&&(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Event Details"}),(0,t.jsxs)("form",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Name"}),t.jsx("input",{id:"name",type:"text",value:M.name,onChange:e=>E({...M,name:e.target.value}),className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),t.jsx("input",{id:"email",type:"email",value:M.email,onChange:e=>E({...M,email:e.target.value}),className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium",children:"Phone"}),t.jsx("input",{id:"phone",type:"tel",value:M.phone,onChange:e=>E({...M,phone:e.target.value}),onBlur:()=>{M.phone&&(/^\+?1?\s*\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})$/.test(M.phone)?m(null):m("Please enter a valid phone number"))},className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"street",className:"block text-sm font-medium",children:"Street Address"}),t.jsx("input",{id:"street",type:"text",value:M.address,onChange:e=>E({...M,address:e.target.value}),className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium",children:"City"}),t.jsx("input",{id:"city",type:"text",value:M.city,onChange:e=>E({...M,city:e.target.value}),className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium",children:"State"}),(0,t.jsxs)("select",{id:"state",value:M.state,onChange:e=>E({...M,state:e.target.value}),className:"border p-2 rounded w-full",children:[t.jsx("option",{value:"",children:"Select State"}),t.jsx("option",{value:"MI",children:"Michigan"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"zip",className:"block text-sm font-medium",children:"Zip Code"}),t.jsx("input",{id:"zip",type:"text",value:M.zipCode,onChange:e=>E({...M,zipCode:e.target.value}),className:"border p-2 rounded w-full"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"eventType",className:"block text-sm font-medium",children:"Event Type"}),t.jsx("input",{id:"eventType",type:"text",value:M.eventType,onChange:e=>E({...M,eventType:e.target.value}),className:"border p-2 rounded w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"surface",className:"block text-sm font-medium",children:"Surface"}),(0,t.jsxs)("select",{id:"surface",value:M.surface,onChange:e=>E({...M,surface:e.target.value}),className:"border p-2 rounded w-full",children:[t.jsx("option",{value:"",children:"Select Surface"}),t.jsx("option",{value:"Grass",children:"Grass"}),t.jsx("option",{value:"Concrete",children:"Concrete"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium",children:"Notes"}),t.jsx("textarea",{id:"notes",value:M.notes,onChange:e=>E({...M,notes:e.target.value}),className:"border p-2 rounded w-full",rows:3})]})]}),x&&(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[t.jsx("p",{children:"Name is required"}),t.jsx("p",{children:"Email is required"}),t.jsx("p",{children:"Phone is required"})]}),c&&t.jsx("p",{children:c}),t.jsx("div",{className:"mt-4 p-4 bg-green-100 rounded",children:t.jsx("p",{className:"text-green-800",children:"✓ Address is within service area"})})]}),5===a&&(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Review & Pay"}),n&&t.jsx("div",{className:"mb-4 text-red-600",role:"alert",children:n}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-bold mb-2",children:"Booking Summary"}),(0,t.jsxs)("div",{className:"border p-4 rounded",children:[v&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["Package: ",v.name]}),(0,t.jsxs)("span",{children:["$",v.price.toFixed(2)]})]}),y.length>0&&t.jsx(t.Fragment,{children:y.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["+ ",e.name]}),(0,t.jsxs)("span",{children:["$",e.price.toFixed(2)]})]},s))}),(0,t.jsxs)("div",{className:"border-t pt-2 mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",k.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Travel Fee"}),t.jsx("span",{children:"$0.00"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Tax (8%)"}),(0,t.jsxs)("span",{children:["$",(.08*k).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[t.jsx("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",(1.08*k).toFixed(2)]})]})]})]})]}),t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:p,onChange:e=>h(e.target.checked)}),t.jsx("span",{children:"I accept the waiver and terms of service"})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("button",{className:"w-full bg-blue-500 text-white py-3 rounded font-bold disabled:opacity-50",disabled:!p,onClick:()=>_("deposit"),children:["Pay Deposit (30%) - $",(.3*k).toFixed(2)]}),(0,t.jsxs)("button",{className:"w-full bg-green-500 text-white py-3 rounded font-bold disabled:opacity-50",disabled:!p,onClick:()=>_("full"),children:["Pay in Full - $",(1.08*k).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("h4",{children:"Card Information"}),(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[t.jsx("input",{type:"text",placeholder:"Card number",className:"border p-2 rounded w-full"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"MM/YY",className:"border p-2 rounded"}),t.jsx("input",{type:"text",placeholder:"CVC",className:"border p-2 rounded"})]})]}),t.jsx("div",{className:"sr-only","aria-hidden":!0,children:"Payment failed"}),t.jsx("button",{className:"mt-3 underline text-blue-600",children:"Try again"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between mt-8",children:[a>1&&t.jsx("button",{className:"px-4 py-2 border rounded",onClick:()=>{a>1&&(r(a-1),i(null),m(null),u(!1))},children:"Back"}),a<5&&t.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded ml-auto",onClick:()=>{if(i(null),1===a){if(!b||!g){i("Please select a date and time");return}b&&T(b),r(a+1)}if(2===a){if(!v){i("Please select a package");return}r(a+1)}if(3===a){if(!y||0===y.length){i("Please select at least one add-on");return}r(a+1)}if(4===a){if(u(!0),!M.name||!M.email||!M.phone||!M.address){i("Please fill in all required fields");return}if(!/^\+?1?\s*\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})$/.test(M.phone)){m("Please enter a valid phone number");return}m(null),r(a+1)}},children:"Next"})]})]})}},5483:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var t=a(5036),l=a(6843);let r=(0,l.createProxy)(String.raw`C:\Users\Owner\Desktop\splash\src\components\BookingStepper.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let d=(0,l.createProxy)(String.raw`C:\Users\Owner\Desktop\splash\src\components\BookingStepper.tsx#BookingStepper`);function o(){return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsx("div",{className:"py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Book Your Foam Party"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Follow the steps below to book your amazing foam party experience"})]}),t.jsx(d,{})]})})})}}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[638,410,453],()=>a(4300));module.exports=t})();